{% style %}
  #shopify-section-{{section.id }} {
    --text-color: rgb({{section.settings.color_scheme.settings.text.red }}, {{section.settings.color_scheme.settings.text.green }}, {{section.settings.color_scheme.settings.text.blue }});
  }

  .section-{{ section.id }}-main {
    padding-top: {{ section.settings.padding_top | times: 0.50 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.50 | round: 0 }}px;
  }

  .section-{{ section.id }}-main .swiper-pagination-bullet {
    border: 1px solid rgba(255,255,255, 1);
    height: 10px;
    width: 10px;
  }

  .section-{{ section.id }}-main .swiper-pagination-bullet-active {
    width: 18px;
    height: 18px;
  }

  .section-{{ section.id }}-image-content {
    color: rgba(var(--color-foreground-overlay), 1);
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-main {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  .text-muted strong {
    color: rgba(var(--color-foreground), 1);
  }

  .image-with-text__image-container {
    height: {{ section.settings.image_height | times: 0.70 | round: 0 }}px;
    @media screen and (min-width: 768px) {
     height: {{ section.settings.image_height }}px;
    }

  }
{% endstyle %}

<div class="section-{{ section.id }}-main gradient color-{{ section.settings.color_scheme }}">
  <div class="section__content page-width flex flex-col gap-6 md:flex-row md:gap-12 lg:gap-20 {% if section.settings.reverse_columns %}md:flex-row-reverse{% endif %}">
    <div class="section__content flex flex-1 flex-col justify-center gap-4">
      {%- if section.settings.title != blank -%}
        <h2 class="text-h1 section-title capitalize">
          {{
            section.settings.title
            | replace: '<em>', '<span>'
            | replace: '</em>', '</span>'
            | replace: '|', '</span><span>'
          }}
        </h2>
      {%- endif -%}

      {%- if section.settings.subtitle != blank -%}
        <p class="text-muted -mt-2 text-lg">{{ section.settings.subtitle }}</p>
      {%- endif -%}

      <div class="flex flex-col gap-4">
        {{ section.settings.content }}
      </div>

      {%- if section.settings.button_label != blank or section.settings.disclaimer != blank -%}
        <div class="section__action hidden w-full flex-col items-center gap-2 text-center md:w-fit lg:inline-flex">
          {%- if section.settings.button_label != blank -%}
            {% render 'button',
              type: 'a',
              variant: 'primary',
              text: section.settings.button_label,
              url: section.settings.button_url
            %}
          {%- endif -%}
          {%- if section.settings.disclaimer != blank -%}
            <span class="inline-block text-sm text-[rgba(var(--color-foreground),0.6)]">
              {{- section.settings.disclaimer -}}
            </span>
          {%- endif -%}
        </div>
      {%- endif -%}
    </div>
    <div class="section__gallery flex flex-1 flex-col gap-6">
      <div class="flex-1">
        <div
          class="image-with-text__image-container relative overflow-hidden rounded-xl"
          {% comment %} style="height: {{ section.settings.image_height }}px;" {% endcomment %}
        >
          {%- if section.settings.image != blank -%}
            {%- assign image_alt = section.settings.image.alt | default: shop.name -%}
            {{
              section.settings.image
              | image_url: width: 1024
              | image_tag: alt: image_alt, class: 'h-full w-full object-cover', loading: 'lazy'
            }}
          {% else %}
            <div class="h-full bg-[rgba(var(--color-foreground),0.3)]"></div>
          {%- endif -%}

          <div class="section-{{ section.id }}-image-content absolute inset-0 flex items-end justify-center gap-4 {% if section.settings.enable_image_overlay %} bg-gradient-to-b from-transparent via-black via-90% to-black {% endif %} pt-4 pr-4 pb-8 pl-4 text-center">
            <div class="flex w-3/4 flex-col gap-3">
              <h3 class="text-2xl font-bold">
                {{ section.settings.image_title }}
              </h3>
              <p class="text-lg">{{ section.settings.image_text }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Image with text",
  "class": "section-image-with-text js-section-color",
  "settings": [
    {
      "type": "checkbox",
      "id": "reverse_columns",
      "label": "Reverse columns",
      "default": false,
      "info": "Image right on default"
    },
    {
      "type": "header",
      "content": "Title"
    },
    {
      "type": "paragraph",
      "content": "To accent a word or phrase, wrap it in italics."
    },
    {
      "type": "inline_richtext",
      "id": "title",
      "label": "Title",
      "default": "A Lightbulb <em>Moment</em>"
    },
    {
      "type": "inline_richtext",
      "id": "subtitle",
      "label": "Subtitle"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "Content",
      "default": "<p>While studying at INSEAD in France, I met Dr. Zac Cartun, a physician with a passion for re-imagining smartphones as medical resources. As we researched the orthotics industry, we discovered that doctors were already scanning patients' feet with their phones and tablets. But no one had built an app to let <strong>patients do it themselves.</strong> That was our lightbulb moment.</p><p>We quickly got to work, recruiting a team to develop the <strong>first-ever mobile foot scanning</strong> solution—so anyone could access high-quality custom orthotics without the hassle.</p>"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button url"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button label",
      "default": "Take The Quiz"
    },
    {
      "type": "inline_richtext",
      "id": "disclaimer",
      "label": "Disclaimer",
      "default": "180 Day Return Policy"
    },
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "range",
      "id": "image_height",
      "min": 100,
      "max": 1000,
      "step": 20,
      "unit": "px",
      "label": "Image height",
      "default": 600
    },
    {
      "type": "checkbox",
      "id": "enable_image_overlay",
      "label": "Enable image overlay",
      "default": false
    },
    {
      "type": "inline_richtext",
      "id": "image_title",
      "label": "Title",
      "default": "Aperiam sed blanditiis"
    },
    {
      "type": "inline_richtext",
      "id": "image_text",
      "label": "Text",
      "default": "Cumque impedit vel facilis enim. Soluta voluptatem delectus rem et.Cumque impedit vel facilis enim. Soluta voluptatem delectus rem et.Cumque impedit vel facilis."
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 320,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 320,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 60
    }
  ],
  "presets": [
    {
      "name": "Image with text",
      "category": "Uncategorized",
      "settings": {
        "reverse_columns": false,
        "title": "A Lightbulb <em>Moment</em>",
        "content": "<p>While studying at INSEAD in France, I met Dr. Zac Cartun, a physician with a passion for re-imagining smartphones as medical resources. As we researched the orthotics industry, we discovered that doctors were already scanning patients' feet with their phones and tablets. But no one had built an app to let <strong>patients do it themselves.</strong> That was our lightbulb moment.</p><p>We quickly got to work, recruiting a team to develop the <strong>first-ever mobile foot scanning</strong> solution—so anyone could access high-quality custom orthotics without the hassle.</p>",
        "button_url": "",
        "button_label": "Take The Quiz",
        "disclaimer": "180 Day Return Policy",
        "image": "shopify://shop_images/61f688bdee11384fecd01075dcbdce42.png",
        "image_height": 600,
        "color_scheme": "",
        "padding_top": 60,
        "padding_bottom": 60
      }
    }
  ]
}
{% endschema %}
