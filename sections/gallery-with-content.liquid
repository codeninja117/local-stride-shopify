{% style %}
  #shopify-section-{{section.id }} {
    --text-color: rgb({{section.settings.color_scheme.settings.text.red }}, {{section.settings.color_scheme.settings.text.green }}, {{section.settings.color_scheme.settings.text.blue }});
  }

  .section-{{ section.id }}-main {
    padding-top: {{ section.settings.padding_top | times: 0.50 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.50 | round: 0 }}px;
  }

  .section-{{ section.id }}-main .swiper-pagination-bullet {
    border: 1px solid rgba(255,255,255, 1);
    height: 10px;
    width: 10px;
  }

  .section-{{ section.id }}-main .swiper-pagination-bullet-active {
    width: 18px;
    height: 18px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-main {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{% endstyle %}

<div class="section-{{ section.id }}-main gradient color-{{ section.settings.color_scheme }}">
  <div class="section__content page-width flex flex-col gap-6 md:flex-row md:gap-12 lg:gap-20 {% if section.settings.reverse_columns %}md:flex-row-reverse{% endif %}">
    <div class="section__gallery flex min-w-0 flex-1 flex-col gap-6">
      {%- if section.blocks.size > 0 -%}
        <ui-carousel
          class="swiper w-full overflow-hidden rounded-xl"
          data-pagination="bullets"
          data-space-between="0"
          style=" --swiper-theme-color: rgba(255,255,255, 0);--swiper-pagination-bullet-inactive-color: rgba(255,255,255, 1);--swiper-pagination-bullet-inactive-opacity: 1;--pagination-spacing: 0;"
        >
          <div class="swiper-wrapper">
            {%- for block in section.blocks -%}
              <div class="swiper-slide">
                <div style="height: {{ section.settings.main_gallery_image_height }}px;">
                  {%- if block.settings.image != blank -%}
                    {%- assign image_alt = block.settings.image.alt | default: shop.name -%}
                    {{
                      block.settings.image
                      | image_url: width: 1024
                      | image_tag: alt: image_alt, class: 'h-full w-full object-cover object-center', loading: 'lazy'
                    }}
                  {%- else -%}
                    <div
                      class="h-full w-full bg-[rgba(var(--color-foreground),0.3)]"
                    ></div>
                  {%- endif -%}

                  <div class="absolute inset-0 flex items-end justify-center gap-4 bg-gradient-to-b from-transparent via-black via-90% to-black pt-4 pr-4 pb-14 pl-4 text-center">
                    <div class="flex w-3/4 flex-col gap-3">
                      <h3 class="text-2xl font-bold">
                        {{ block.settings.title }}
                      </h3>
                      <p class="text-lg">{{ block.settings.text }}</p>
                    </div>
                  </div>
                </div>
              </div>
            {%- endfor -%}
          </div>

          <div
            class="swiper-pagination !absolute !right-0 !bottom-4 !left-0 z-2 items-center justify-center"
          ></div>
        </ui-carousel>
      {%- else -%}
        <div class="relative aspect-square rounded-xl bg-gradient-to-t from-black to-transparent md:aspect-video"></div>
      {%- endif -%}

      <div class="flex flex-row gap-6">
        <div class="relative aspect-square flex-1 overflow-hidden rounded-xl md:aspect-video">
          {%- if section.settings.image_below_carousel_2 != blank -%}
            {%- assign image_below_carousel_2_alt = section.settings.image_below_carousel_2.alt | default: shop.name -%}
            {{
              section.settings.image_below_carousel_2
              | image_url: width: 1024
              | image_tag:
                alt: image_below_carousel_2_alt,
                class: 'h-full w-full object-cover object-center',
                loading: 'lazy'
            }}
          {% else %}
            <div class="aspect-square rounded-xl bg-[rgba(var(--color-foreground),0.3)] md:aspect-video"></div>
          {%- endif -%}

          {%- if section.settings.image_below_carousel_2_text != blank -%}
            <div class="absolute inset-0 z-1 flex items-end justify-center bg-gradient-to-t from-black to-transparent p-4">
              <div class="text-sm text-white">
                {{
                  section.settings.image_below_carousel_2_text
                  | replace: '<em>', '<span class="text-muted">'
                  | replace: '</em>', '</span>'
                  | replace: '|', '</span><span>'
                }}
              </div>
            </div>
          {%- endif -%}
        </div>
        <div class="relative aspect-square flex-1 overflow-hidden rounded-xl md:aspect-video">
          {%- if section.settings.image_below_carousel_1 != blank -%}
            {%- assign image_below_carousel_1_alt = section.settings.image_below_carousel_1.alt | default: shop.name -%}
            {{
              section.settings.image_below_carousel_1
              | image_url: width: 1024
              | image_tag:
                alt: image_below_carousel_1_alt,
                class: 'h-full w-full object-cover object-center',
                loading: 'lazy'
            }}
          {% else %}
            <div class="aspect-square rounded-xl bg-[rgba(var(--color-foreground),0.3)] md:aspect-video"></div>
          {%- endif -%}

          {%- if section.settings.image_below_carousel_1_text != blank -%}
            <div class="absolute inset-0 z-1 flex items-end justify-center bg-gradient-to-t from-black to-transparent p-4">
              <div class="text-sm text-white">
                {{
                  section.settings.image_below_carousel_1_text
                  | replace: '<em>', '<span class="text-muted">'
                  | replace: '</em>', '</span>'
                  | replace: '|', '</span><span>'
                }}
              </div>
            </div>
          {%- endif -%}
        </div>
      </div>
    </div>
    <div class="section__content flex flex-1 flex-col gap-4">
      <h2 class="text-display-l leading-[1.2] capitalize">
        {{
          section.settings.title
          | replace: '<em>', '<span class="text-muted">'
          | replace: '</em>', '</span>'
          | replace: '|', '</span><span>'
        }}
      </h2>
      <div class="flex flex-col gap-4">
        {{ section.settings.content }}
      </div>

      {%- if section.settings.button_label != blank or section.settings.disclaimer != blank -%}
        <div class="mt-4 flex flex-col gap-2">
          {%- if section.settings.button_label != blank -%}
            {% render 'button',
              type: 'a',
              variant: 'primary',
              text: section.settings.button_label,
              url: section.settings.button_url
            %}
          {%- endif -%}
          {%- if section.settings.disclaimer != blank -%}
            <span class="inline-block text-center text-lg text-[rgba(var(--color-foreground),0.6)] sm:text-left">
              {{- section.settings.disclaimer -}}
            </span>
          {%- endif -%}
        </div>
      {%- endif -%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Gallery with Content",
  "class": "section-media-gallery-with-content js-section-color",
  "tag": "section",
  "settings": [
    {
      "type": "checkbox",
      "id": "reverse_columns",
      "label": "Reverse columns",
      "default": false,
      "info": "Image left on default"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "paragraph",
      "content": "Use italics to highlight a word or phrase."
    },
    {
      "type": "inline_richtext",
      "id": "title",
      "label": "Title",
      "default": "Our Story: <em>Frustration to Innovation</em>"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "Content",
      "default": "<p>For as long as I can remember, I've had flat feet. Like many, I tried stretching, exercises, and countless over-the-counter insoles—but 'pushing through' was just a reality of life.</p><p>The story begins in 2021 when I was training for my first Ironman. I sought out a top podiatrist and paid nearly $900 for what I was told were the best orthotics money could buy. After multiple doctor visits and two months of waiting, my orthotics finally arrived.</p><p>They got me through the race, but I needed more support. Another $400 and another month of waiting later, my replacement pair never even arrived. Frustrated and in pain, I spent months walking around Europe with nothing more than cheap Amazon insoles, wondering—why isn't there a better way?</p>"
    },
    {
      "type": "header",
      "content": "CTA"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button url"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button label",
      "default": "Take The Quiz"
    },
    {
      "type": "inline_richtext",
      "id": "disclaimer",
      "label": "Disclaimer",
      "default": "180 Day Return Policy"
    },
    {
      "type": "header",
      "content": "Images below carousel"
    },
    {
      "type": "image_picker",
      "id": "image_below_carousel_1",
      "label": "Image 1"
    },
    {
      "type": "inline_richtext",
      "id": "image_below_carousel_1_text",
      "label": "Image 1 text",
      "default": "Cumque impedit vel facilis enim."
    },
    {
      "type": "image_picker",
      "id": "image_below_carousel_2",
      "label": "Image 2"
    },
    {
      "type": "inline_richtext",
      "id": "image_below_carousel_2_text",
      "label": "Image 2 text",
      "default": "Cumque impedit vel facilis enim."
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-4"
    },
    {
      "type": "header",
      "content": "Main gallery image height"
    },
    {
      "type": "range",
      "id": "main_gallery_image_height",
      "min": 100,
      "max": 1000,
      "step": 20,
      "unit": "px",
      "label": "Image height",
      "default": 500
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 320,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 320,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 60
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "inline_richtext",
          "id": "title",
          "label": "Title",
          "default": "Aperiam sed blanditiis"
        },
        {
          "type": "inline_richtext",
          "id": "text",
          "label": "Text",
          "default": "Cumque impedit vel facilis enim. Soluta voluptatem delectus rem et.Cumque impedit vel facilis enim. Soluta voluptatem delectus rem et.Cumque impedit vel facilis."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Gallery with Content",
      "category": "Uncategorized",
      "blocks": {
        "slide_pNfnTA": {
          "type": "slide",
          "settings": {
            "image": "shopify://shop_images/46f4eac3e3b60c5287bef52c519f7d5f.png",
            "title": "Aperiam sed blanditiis",
            "text": "Cumque impedit vel facilis enim. Soluta voluptatem delectus rem et.Cumque impedit vel facilis enim. Soluta voluptatem delectus rem et.Cumque impedit vel facilis."
          }
        },
        "slide_XmpHCF": {
          "type": "slide",
          "settings": {
            "image": "shopify://shop_images/Frame_2147223816.png",
            "title": "Aperiam sed blanditiis",
            "text": "Cumque impedit vel facilis enim. Soluta voluptatem delectus rem et.Cumque impedit vel facilis enim. Soluta voluptatem delectus rem et.Cumque impedit vel facilis."
          }
        },
        "slide_FAWm7h": {
          "type": "slide",
          "settings": {
            "image": "shopify://shop_images/Frame_2147223818.png",
            "title": "Aperiam sed blanditiis",
            "text": "Cumque impedit vel facilis enim. Soluta voluptatem delectus rem et.Cumque impedit vel facilis enim. Soluta voluptatem delectus rem et.Cumque impedit vel facilis."
          }
        }
      },
      "block_order": ["slide_pNfnTA", "slide_XmpHCF", "slide_FAWm7h"],
      "settings": {
        "reverse_columns": false,
        "title": "Our Story: <em>Frustration to Innovation</em>",
        "content": "<p>For as long as I can remember, I've had flat feet. Like many, I tried stretching, exercises, and countless over-the-counter insoles—but 'pushing through' was just a reality of life.</p><p>The story begins in 2021 when I was training for my first Ironman. I sought out a top podiatrist and paid nearly $900 for what I was told were the best orthotics money could buy. After multiple doctor visits and two months of waiting, my orthotics finally arrived.</p><p>They got me through the race, but I needed more support. Another $400 and another month of waiting later, my replacement pair never even arrived. Frustrated and in pain, I spent months walking around Europe with nothing more than cheap Amazon insoles, wondering—why isn't there a better way?</p>",
        "button_url": "",
        "button_label": "Take The Quiz",
        "disclaimer": "180 Day Return Policy",
        "image_below_carousel_1": "shopify://shop_images/7dceb4b94ad4d4fe1c8e97457f237c3a.png",
        "image_below_carousel_1_text": "Cumque impedit vel facilis enim.",
        "image_below_carousel_2": "shopify://shop_images/82b2459d0431edff98c8f126e8d3ee02.png",
        "image_below_carousel_2_text": "Cumque impedit vel facilis enim.",
        "color_scheme": "",
        "padding_top": 60,
        "padding_bottom": 60
      }
    }
  ]
}
{% endschema %}
