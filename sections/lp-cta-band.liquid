{%- style -%}
  #shopify-section-{{ section.id }} {
    padding-inline: 0;
  }

  #shopify-section-{{ section.id }} .lp-cta-band {
    position: relative;
    border-radius: 0;
    overflow: hidden;
    color: {{ section.settings.text_color }};
    background: #111;
    max-width: none;
    margin: 0;
    min-height: 230px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 44px 0 40px;
    --color-button: 22, 22, 24;
    --color-button-text: 255, 255, 255;
    --color-button-hover: 22, 22, 24;
    --color-button-label-hover: 255, 255, 255;
  }

  #shopify-section-{{ section.id }} .lp-cta-band::before {
    content: "";
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, {{ section.settings.overlay_opacity | divided_by: 100.0 }});
    z-index: 1;
  }

  #shopify-section-{{ section.id }} .lp-cta-band__media {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  #shopify-section-{{ section.id }} .lp-cta-band__content {
    position: relative;
    z-index: 2;
    max-width: 560px;
  }

  #shopify-section-{{ section.id }} .lp-cta-band__eyebrow {
    margin: 0 0 8px;
    font-size: 12px;
    line-height: 1.2;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    opacity: 0.9;
  }

  #shopify-section-{{ section.id }} .lp-cta-band__title {
    margin: 0 0 12px;
    font-size: clamp(24px, 3.6vw, 42px);
    line-height: 1.16;
    font-weight: 600;
    color: #e7c28f;
  }

  #shopify-section-{{ section.id }} .lp-cta-band .btn-primary {
    border-color: rgba(255, 255, 255, 0.35);
  }

  #shopify-section-{{ section.id }} .lp-cta-band .btn-primary__inner {
    background: #ffffff;
    color: #141414;
  }

  #shopify-section-{{ section.id }} .lp-cta-band .btn-primary:hover .btn-primary__inner {
    background: #ffffff;
    color: #141414;
  }
{%- endstyle -%}

<section class="lp-cta-band">
  {%- if section.settings.background_image != blank -%}
    {{
      section.settings.background_image
      | image_url: width: 2200
      | image_tag: class: 'lp-cta-band__media', loading: 'lazy', alt: section.settings.title
    }}
  {%- elsif section.settings.fallback_background_asset != blank -%}
    <img
      class="lp-cta-band__media"
      src="{{ section.settings.fallback_background_asset | asset_url }}"
      alt="{{ section.settings.title | escape }}"
      loading="lazy"
      width="1440"
      height="436"
    >
  {%- endif -%}

  <div class="lp-cta-band__content">
    {%- if section.settings.eyebrow != blank -%}
      <p class="lp-cta-band__eyebrow">{{ section.settings.eyebrow }}</p>
    {%- endif -%}
    {%- if section.settings.title != blank -%}
      <h2 class="lp-cta-band__title">{{ section.settings.title }}</h2>
    {%- endif -%}
    {%- if section.settings.button_label != blank -%}
      {% render 'button', tag: 'a', variant: 'primary', text: section.settings.button_label, url: section.settings.button_url %}
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "LP CTA band",
  "tag": "section",
  "class": "section",
  "settings": [
    { "type": "image_picker", "id": "background_image", "label": "Background image" },
    { "type": "text", "id": "fallback_background_asset", "label": "Fallback background asset path", "default": "landingpage-image 1.png" },
    { "type": "text", "id": "eyebrow", "label": "Eyebrow", "default": "Custom orthotics from your phone" },
    { "type": "inline_richtext", "id": "title", "label": "Title", "default": "Get Orthotics Built on Data, Not Guesswork. Only $249" },
    { "type": "text", "id": "button_label", "label": "Button label", "default": "Take your free scan" },
    { "type": "url", "id": "button_url", "label": "Button URL" },
    { "type": "range", "id": "overlay_opacity", "label": "Overlay opacity", "min": 0, "max": 90, "step": 5, "default": 45, "unit": "%" },
    { "type": "color", "id": "text_color", "label": "Text color", "default": "#FFFFFF" }
  ],
  "presets": [{ "name": "LP CTA band" }]
}
{% endschema %}
